# 智能视频目标消除与语义编辑系统 - 文件结构说明文档

## 项目概述
这是一个基于React Native的移动端智能视频编辑应用，集成了视频目标消除、语义编辑等功能。项目采用前后端分离架构，前端使用React Native，后端使用Python。

## 整体文件结构

```
Intelligent_Video_Target_Elimination_and_Semantic_Editing_System_for_Mobile_Devices/
├── App.tsx                                    # 主应用入口文件
├── Src/                                       # 源代码目录
│   ├── App/                                   # 前端应用代码
│   ├── Backend/                               # 后端服务代码
│   └── Images/                                # 图片资源目录
└── Models/                                    # AI模型目录
```

## 详细文件结构说明

### 1. App.tsx - 主应用入口文件

**文件位置**: 项目根目录
**文件大小**: 485行
**主要功能**: 
- 应用的主入口点和导航配置
- 权限管理（存储、通知等）
- 多语言支持配置
- 底部标签导航栏实现

**核心组件**:
- `App`: 主应用组件
- `MainTabs`: 底部标签导航组件
- `HomeStack`: 主页堆栈导航器
- `CustomTabBar`: 自定义标签栏组件

**导航结构**:
- HomeTab (主页)
- Community (社区)
- Persona (角色)
- Projects (剪辑)
- Settings (设置)

**权限管理**:
- Android 13+ (API 33+): READ_MEDIA_IMAGES, READ_MEDIA_VIDEO, READ_MEDIA_AUDIO, POST_NOTIFICATIONS
- Android 13以下: WRITE_EXTERNAL_STORAGE, READ_EXTERNAL_STORAGE

### 2. Src/App/ - 前端应用代码

#### 2.1 核心屏幕组件

**MediaPickerScreen.tsx** (360行)
- 媒体选择界面
- 支持图片和视频选择
- 文件上传功能

**EditMediaScreen.tsx** (808行)
- 媒体编辑主界面
- 视频编辑功能
- 目标消除操作界面

**HomeScreen.tsx** (496行)
- 应用主页
- 项目展示和管理
- 快速操作入口

**CommunityScreen.tsx** (332行)
- 社区功能界面
- 用户交流平台
- 内容分享功能

**PersonaScreen.tsx** (628行)
- 角色管理界面
- 个性化设置
- 角色切换功能

**SettingsScreen.tsx** (648行)
- 应用设置界面
- 用户偏好配置
- 系统参数调整

**CreatePersonaScreen.tsx** (357行)
- 创建新角色界面
- 角色配置选项
- 个性化定制

**StyleCardDetailScreen.tsx** (457行)
- 风格卡片详情
- 样式预览
- 应用设置

**SelectPersonaScreen.tsx** (117行)
- 角色选择界面
- 快速切换功能

#### 2.2 组件库 (components/)

**ChatScreen.tsx** (436行)
- 聊天界面组件
- 消息交互功能

**ChatMessage.tsx** (204行)
- 聊天消息组件
- 消息显示和样式

#### 2.3 上下文管理 (context/)

**LanguageContext.tsx** (36行)
- 多语言支持上下文
- 中英文切换功能

**UserContext.tsx** (82行)
- 用户信息上下文
- 用户状态管理

**PersonaContext.tsx** (99行)
- 角色管理上下文
- 角色状态和配置

#### 2.4 工具函数 (utils/)

**personaManager.ts** (82行)
- 角色管理工具
- 角色CRUD操作

**personaPresets.ts** (286行)
- 预设角色配置
- 默认角色模板

**draftVideoManager.ts** (165行)
- 草稿视频管理
- 临时文件处理

**personaDisplay.ts** (97行)
- 角色显示工具
- 界面渲染辅助

**permissionManager.ts** (87行)
- 权限管理工具
- 权限检查和请求

### 3. Src/Backend/ - 后端服务代码

#### 3.1 核心服务

**api_server.py** (419行)
- 主API服务器
- RESTful接口实现
- 前后端通信

**video_editor.py** (248行)
- 视频编辑核心功能
- 视频处理算法
- 编辑操作实现

**moviepy_editor.py** (783行)
- MoviePy视频编辑
- 高级视频处理
- 特效和转场

**ffmpeg_editor.py** (362行)
- FFmpeg视频处理
- 底层视频操作
- 格式转换

#### 3.2 AI模型和算法

**sam2_model.py** (740行)
- SAM2分割模型
- 图像分割算法
- 目标检测

**video_comprehension.py** (285行)
- 视频理解模块
- 语义分析
- 内容识别

**nlp_parser.py** (397行)
- 自然语言解析
- 指令理解
- 语义处理

#### 3.3 辅助功能

**config.py** (84行)
- 配置文件
- 系统参数
- 环境变量

**auth_util_tools.py** (68行)
- 认证工具
- 用户验证
- 安全功能

**user_personality_card.py** (42行)
- 用户个性卡片
- 偏好设置
- 个性化配置

**demo_audio_features.py** (152行)
- 音频特性演示
- 音频处理示例

#### 3.4 测试和示例

**Test/** 目录
- 功能测试代码
- 集成测试
- 性能测试

**MergeVideo/** 目录
- 视频合并功能
- 多视频处理

#### 3.5 资源文件

**Audio/** 目录
- 音频资源
- 背景音乐
- 音效文件

**uploads/** 目录
- 用户上传文件
- 临时存储
- 处理队列

**Output/** 目录
- 处理结果输出
- 最终视频文件
- 临时文件

**personality_cards/** 目录
- 个性卡片配置
- 预设模板
- 用户自定义

### 4. Src/Images/ - 图片资源目录

#### 4.1 通用资源
- `background.png` - 应用背景图
- `bottom-tabs.png` - 底部标签栏背景
- `commender.png` - 推荐图标
- `edit.png` - 编辑图标
- `setting.png` - 设置图标
- `home.png` - 主页图标
- `text.png` - 文本图标

#### 4.2 界面专用资源

**HomePage/** - 主页界面图片
- 卡片背景、装饰元素、按钮图标等

**EditMediaScreen/** - 编辑界面图片
- 视频播放器、进度条、操作按钮等

**MediaPickerScreen/** - 媒体选择界面图片
- 选择器背景、机器人图标等

**SettingScreen/** - 设置界面图片
- 设置背景、选择框、信息图标等

**Community/** - 社区界面图片
- 下载、显示、文本背景等

**Persona/** - 角色界面图片
- 电脑、装饰元素等

## 技术架构特点

### 前端架构
- **框架**: React Native
- **导航**: React Navigation (Stack + Material Top Tabs)
- **状态管理**: React Context API
- **多语言**: 内置中英文支持
- **UI组件**: 自定义组件库

### 后端架构
- **语言**: Python
- **视频处理**: FFmpeg + MoviePy
- **AI模型**: SAM2分割模型
- **API**: RESTful接口
- **文件处理**: 多格式支持

### 核心功能
1. **视频目标消除**: 基于SAM2模型的智能分割
2. **语义编辑**: NLP驱动的视频理解
3. **多角色支持**: 个性化编辑体验
4. **社区功能**: 用户交流和分享
5. **多语言**: 中英文双语支持

## 开发注意事项

1. **权限管理**: 确保Android权限正确配置
2. **文件路径**: 注意跨平台文件路径处理
3. **内存管理**: 视频处理时注意内存使用
4. **错误处理**: 完善的异常处理机制
5. **性能优化**: 大文件处理时的性能考虑

## 部署要求

- **前端**: React Native环境 (Android/iOS)
- **后端**: Python 3.7+
- **依赖**: FFmpeg, MoviePy, PyTorch等
- **存储**: 足够的磁盘空间用于视频处理
- **内存**: 建议8GB+ RAM用于AI模型运行
